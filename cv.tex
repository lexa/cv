\documentclass[11pt,a4paper]{moderncv}
\moderncvstyle{casual}
\moderncvcolor{blue}
\name{Aleksei}{Fedotov}
\phone[mobile]{+7~(915)~984~59~77}
\social[github]{lexa}
\social[linkedin]{aleksei-fedotov}
\usepackage{polyglossia}
\usepackage{graphicx}
\setmainfont{CMU Bright}

\newif\ifenglish
\newif\ifrussian
\newcommand{\ml}[2]{\ifenglish#1\else#2\fi}

\directlua {
  local lang = os.getenv('CV_LANGUAGE')
  tex.print("\string\\setdefaultlanguage{" .. lang .. "}")
  tex.print("\string\\" .. lang .. "true")
}

\begin{document}
\makecvtitle
\setlength{\hintscolumnwidth}{0.20\textwidth}

\section{\ml{Education}{Образование}}
\def \UNIV {\ml{Yaroslavl State University}{ЯРгУ им. П.Г. Демидова}}
\def \YAR {\ml{Yaroslavl, Russia}{г. Ярославль}}
\def \MSK {\ml{Moscow}{Москва}}
\def \Samsung {\ml{Samsung R\&D Russia}{Исследовательский центр самсунг}}
\def \Samsunglogo {\\\includegraphics[width=20pt]{samsung.png}}
% TODO: add average grade
\cventry{2006--2010}{\ml{Bachelor}{Бакалавр}}{\UNIV}{\YAR}{}{}
\cventry{2010--2012}{\ml{Master}{Магистр}}{\UNIV}{\YAR}{}{}

\section{\ml{Experience}{Опыт работы}}
\cventry{2015--\ml{now}{Настоящее время}}{\ml{Lead Software Engineer}{Ведущий инженер-разработчик}}{\Samsung}{\MSK}{}{}
\cventry{2014--2015}{\ml{Software Engineer}{Инженер-разработчик}}{\Samsung}{\MSK}{}{}
\cventry{2013--2014}{\ml{Junior Software Engineer}{Младший инженер-разработчик}}{\Samsung}{\MSK}{}{}
\cventry{2012--2013}{\ml{Software Engineer}{Инженер-разработчик}}{YarSpecAlgo}{\YAR}{}{}

\section{\ml{Languages}{Знание языков}}
\cvitem{\ml{English}{Английский}}{Upper Intermediate}
\cvitem{\ml{Russian}{Русский}}{\ml{Native}{Родной}}

\section{Computer skills}
\cvitem{Linux}{Kernel}

\end{document}
