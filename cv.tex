\documentclass[11pt,a4paper]{moderncv}
\moderncvstyle{casual}
\moderncvcolor{blue}
\name{Aleksei}{Fedotov}
\phone[mobile]{+7~(915)~984~59~77}
\social[github]{lexa}
\social[linkedin]{aleksei-fedotov}
\usepackage{polyglossia}
\setmainfont{CMU Bright}

\newif\ifenglish
\newif\ifrussian
\newcommand{\ml}[2]{\ifenglish#1\else#2\fi}

\directlua {
  local lang = os.getenv('CV_LANGUAGE')
  tex.print("\string\\setdefaultlanguage{" .. lang .. "}")
  tex.print("\string\\" .. lang .. "true")
}

\begin{document}
\makecvtitle
\setlength{\hintscolumnwidth}{0.20\textwidth}

\section{\ml{Education}{Образование}}
\def \UNIV {\ml{Yaroslavl State University}{ЯРгУ им. П.Г. Демидова}}
\def \YAR {\ml{Yaroslavl, Russia}{г. Ярославль}}
% TODO: add average grade
\cventry{2006--2010}{\ml{Bachelor}{Бакалавр}}{\UNIV}{\YAR}{}{}
\cventry{2010--2012}{\ml{Master}{Магистр}}{\UNIV}{\YAR}{}{}

\section{Experience}
\cventry{March 2015--Present}{Lead Software Engineer}{Samsung R\&D Institute Rus}{Moscow, Russia}{}{}
\cventry{March 2014--February 2015}{Software Engineer}{Samsung R\&D Institute Rus}{Moscow, Russia}{}{}
\cventry{June 2013--February 2014}{Junior Software Engineer}{Samsung R\&D Institute Rus}{Moscow, Russia}{}{}
\cventry{2012--June 2013}{Software Engineer}{YarSpecAlgo}{Yaroslavl, Russia}{}{}

\section{Languages}
\cvitem{English}{Upper Intermediate}
\cvitem{Russian}{Native}


\section{Computer skills}
\cvitem{Linux}{Kernel}

\end{document}
