\documentclass[11pt,a4paper]{moderncv}
\usepackage{polyglossia}
\usepackage{graphicx}

\newif\ifenglish
\newif\ifrussian
\newcommand{\ml}[2]{\ifenglish#1\else#2\fi}

\directlua {
  local lang = os.getenv('CV_LANGUAGE')
  tex.print("\string\\setdefaultlanguage{" .. lang .. "}")
  tex.print("\string\\" .. lang .. "true")
}

\moderncvstyle{casual}
\moderncvcolor{blue}
\name{\ml{Aleksei}{Алексей}}{\ml{Fedotov}{Федотов}}
\title{\ml{Resume}{Резюме}}
\phone[mobile]{+7~(915)~984~59~77}
\email{a.fedotov@cfotr.com}
\social[github]{lexa}
\social[linkedin]{aleksei-fedotov}
\setmainfont{CMU Bright}

\begin{document}
\makecvtitle
\setlength{\hintscolumnwidth}{0.20\textwidth}

\section{\ml{Education}{Образование}}
\def \UNIV {\ml{Yaroslavl State University}{ЯРгУ им. П.Г. Демидова}}
\def \YAR {\ml{Yaroslavl, Russia}{г. Ярославль}}
\def \MSK {\ml{Moscow}{Москва}}
\def \Samsung {\ml{Samsung R\&D Russia}{Исследовательский центр самсунг}}
\def \Samsunglogo {\\\includegraphics[width=20pt]{samsung.png}}
% TODO: add average grade
\cventry{2006--2010}{\ml{Bachelor}{Бакалавр}}{\UNIV}{\YAR}{}{}
\cventry{2010--2012}{\ml{Master}{Магистр}}{\UNIV}{\YAR}{}{}

\section{\ml{Experience}{Опыт работы}}
\cventry{2015--\ml{now}{Настоящее время}\Samsunglogo}{\ml{Lead Software Engineer}{Ведущий инженер-разработчик}}{\Samsung}{\MSK}{}{}
\cventry{2013--2015\Samsunglogo}{\ml{Software Engineer}{Инженер-разработчик}}{\Samsung}{\MSK}{}{}
\cventry{2012--2013}{\ml{Software Engineer}{Инженер-разработчик}}{\ml{YarSpecAlgo}{ЯрСпецАлгоритм}}{\YAR}{}{}

\section{\ml{Languages}{Знание языков}}
\cvitem{\ml{English}{Английский}}{Upper Intermediate}
\cvitem{\ml{Russian}{Русский}}{\ml{Native}{Родной}}

\section{\ml{Computer skills}{Технические навыки}}
\cvitem{\ml{Languages}{Языки}}{C, Bash, Python(basic), GNU Make, C++(basic), ASM(basic)}
\cvitem{VCS}{Git, Perforce}
\cvitem{\ml{OS}{ОС}}{GNU\textbackslash Linux, Android, Tizen}
\cvitem{\ml{Other}{Прочее}}{GDB, \LaTeX, Valgrind, Emacs}

\end{document}
